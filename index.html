<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div class="row">
        <input id="flight-num">
    </div>
    <div class="row">
        <input id="addr">
    </div>
    <button id="go">Go</button>
    <div id="map" style="height:300px; width=500px;"></div>
</body>
<script src="//maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://54.235.132.110/socket.io/socket.io.js"></script>
<script type="text/javascript">
    $(document).ready(function() { 

        var flight = 710;
        var direction = 'Arrival';
        var server = 'http://54.235.132.110/';

        var socket = io.connect(server);

        socket.on('update', function(data) {
            console.log(data);
        });

        var mapOptions = {
          center: new google.maps.LatLng(39.875, -75.238),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById("map"),
            mapOptions);

        socket.emit('subscribe', {"flightNumber": flight, "direction": direction});

        $.getJSON(server + 'number/' + flight + '?callback=?', function(status) {
            console.log(status);
        });

        var directionsService = new google.maps.DirectionsService();
        var directionsDisplay = new google.maps.DirectionsRenderer();
        directionsDisplay.setMap(map);

        $('#go').click(calcRoute);

        function calcRoute() {
              var start = $('#addr').val();
              var end = "Philadelphia International Airport";
              var request = {
                origin:start,
                destination:end,
                travelMode: google.maps.TravelMode.DRIVING
              };
              directionsService.route(request, function(result, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                  directionsDisplay.setDirections(result);
                }
          });
        }
    
    });
</script>
</html>

